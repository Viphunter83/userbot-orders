# –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. **–ü–∞—Ä–æ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - `SUPABASE_PASSWORD=OExq0NAm6NDF04cQ` —á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–ö–æ–¥ –≥–æ—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è pooler –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
3. **SSL –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç SSL
4. **Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ REST API

## üîç –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å Connection String –∏–∑ Supabase Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **https://supabase.com/dashboard/project/gioxfhlmzewgtqspokrt**
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Connect"** –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ä—è–¥–æ–º —Å "Settings")
3. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –Ω–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Connection pooling"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"Transaction mode"** (–ø–æ—Ä—Ç 6543) –∏–ª–∏ **"Session mode"** (–ø–æ—Ä—Ç 5432)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection String - –æ–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```
postgres://postgres.gioxfhlmzewgtqspokrt:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
```

**–í–ê–ñ–ù–û:** –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
- –§–æ—Ä–º–∞—Ç —Ö–æ—Å—Ç–∞: `aws-0-[REGION].pooler.supabase.com` 
- –†–µ–≥–∏–æ–Ω –≤ —Ö–æ—Å—Ç–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å `ap-southeast-1`, `us-east-1`, `eu-west-1` –∏ —Ç.–¥.)
- –§–æ—Ä–º–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `postgres.gioxfhlmzewgtqspokrt`
- –ü–æ—Ä—Ç: `6543` (transaction) –∏–ª–∏ `5432` (session)

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª

–ò–∑–≤–ª–µ–∫–∏—Ç–µ –∏–∑ Connection String –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `.env`:

```env
# –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ .env:
SUPABASE_HOST=aws-0-[–í–ê–®_–†–ï–ì–ò–û–ù_–ò–ó_CONNECTION_STRING].pooler.supabase.com
SUPABASE_PORT=6543
SUPABASE_USER=postgres.gioxfhlmzewgtqspokrt
SUPABASE_PASSWORD=OExq0NAm6NDF04cQ
SUPABASE_DB=postgres
```

**–ü—Ä–∏–º–µ—Ä:**
–ï—Å–ª–∏ Connection String —Å–æ–¥–µ—Ä–∂–∏—Ç `aws-0-us-east-1.pooler.supabase.com`, —Ç–æ:
```env
SUPABASE_HOST=aws-0-us-east-1.pooler.supabase.com
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `.env`:

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
python3 -m src.main admin test-connection

# –ò–ª–∏ –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
python3 scripts/fix_db_connection.py
```

## üìã –¢–µ–∫—É—â–∏–π .env (—á—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)

```env
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Ç–µ–∫—É—â–µ–µ):
SUPABASE_HOST=db.gioxfhlmzewgtqspokrt.supabase.co
SUPABASE_USER=postgres

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è Connection String):
SUPABASE_HOST=aws-0-[REGION].pooler.supabase.com
SUPABASE_USER=postgres.gioxfhlmzewgtqspokrt
```

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

–ï—Å–ª–∏ Connection String –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç —Ö–æ—Å—Ç–∞ (–Ω–µ `aws-0-[REGION]`), –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ö–æ—Å—Ç –∏–∑ Connection String –∫–∞–∫ –µ—Å—Ç—å.

## ‚úÖ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è pooler
- –ù–∞—Å—Ç—Ä–æ–∏—Ç SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –û—Ç–∫–ª—é—á–∏—Ç prepared statements –¥–ª—è transaction mode
- –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL

## üÜò –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ REST API (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).

